<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TODO API Assignment</title>
    <link rel="stylesheet" href="style.css" />
    <script src="todo.js"></script>
    <script src="dom-manipulation.js"></script>
    <script src="./filtering.js"></script>
  </head>
  <body>
    <script>
      // This assignment uses fetching from an external API, and DOM manipulation.
      // The API is https://jsonplaceholder.typicode.com/todos
      // The API returns a list of todo-entries.
      // The todo-entries have the following properties:
      // - id: number
      // - title: string
      // - completed: boolean
      // - userId: number
      //
      // Available functions:
      // - createAndAppendElement(parent, tag, attributes, children)
      // - clearBodyElement()
      // - todoList.fetchTodos()
      // - todoList.todos
      //
      // If you are unsure of something, please ask!

      // First, let's clear the body element
      clearBodyElement();

      // Populate the site -> First heading and title, then filter section, then main section
      // Elements for heading
      const heading_title = document.createElement("h1");
      heading_title.innerText = "TODO List API Assignment";
      createAndAppendElement(document.body, "section", { id: "heading" }, [
        heading_title,
      ]);

      // Setup of all elements needed for filter
      const label_userid = document.createElement("label");
      const userid_search = document.createElement("input");
      const filter_btn = document.createElement("button");
      const clear_btn = document.createElement("button");

      // Setting attributes for the filter elements
      label_userid.setAttribute("for", "userid_searchbox");
      label_userid.innerText = "User ID: ";

      userid_search.setAttribute("name", "userid_searchbox");
      userid_search.setAttribute("placeholder", "1-10");
      userid_search.setAttribute("min", 1);
      userid_search.setAttribute("max", 10);
      userid_search.setAttribute("type", "number");
      userid_search.setAttribute("id", "userid_box");

      filter_btn.setAttribute("onclick", "filterResult()");
      filter_btn.setAttribute("type", "button");
      filter_btn.innerText = "Filter Result";

      clear_btn.setAttribute("onclick", "clearFilter()");
      clear_btn.setAttribute("type", "button");
      clear_btn.innerText = "Clear Filter";

      // Creation of section for filter
      createAndAppendElement(
        document.body,
        "section",
        { id: "filter_section" },
        []
      );

      const filter_section = document.getElementById("filter_section");
      // Creation of Form and appending all the child elements
      createAndAppendElement(filter_section, "form", { id: "filter_form " }, [
        label_userid,
        userid_search,
        filter_btn,
        clear_btn,
      ]);

      // Creation of Main Container
      const main = document.createElement("main");
      main.setAttribute("id", "main_container");
      document.body.appendChild(main);

      // Calls on a function in filter.js
      // function calls on todo.js to fetch data and populates the main container
      populateArticles();
    </script>
  </body>
</html>
